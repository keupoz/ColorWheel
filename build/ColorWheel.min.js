!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ColorWheel=e()}(this,function(){"use strict";var R=2*Math.PI,T=Math.PI/180,G=Math.PI/6,z=Math.PI/3,W=Math.PI/2,t=Math.sqrt(3),X=t/2,Y=t/4;function j(t){return Math.max(0,Math.min(t,1))}function q(t){return(t-=360*(t/360|0))<0&&(t+=360),t}function e(u,e){void 0===e&&(e=256);var a,f,n,o,d,i,y,M,s,l,c,r,h=document.createElement("canvas").getContext("2d"),v=document.createElement("canvas").getContext("2d"),S=document.createElement("canvas").getContext("2d"),H=this,m=0,L=0,p=1,g=1,x=[0,0,0].map(function(){return{x:0,y:0}});function P(){v.save(),v.clearRect(0,0,e,e),v.translate(a,a),v.rotate(-m),v.beginPath(),v.moveTo(x[0].x,x[0].y),v.lineTo(x[1].x,x[1].y),v.lineTo(x[2].x,x[2].y),v.closePath(),v.fillStyle="hsl("+L+", 100%, 50%)",v.fill(),v.fillStyle=l,v.fill(),v.save(),v.globalCompositeOperation="lighter",v.fillStyle=s,v.fill(),v.restore(),v.strokeStyle="whitesmoke",v.lineWidth=i,v.stroke(),v.beginPath(),v.arc(c,r,5,0,R),v.fillStyle=H.css,v.stroke(),v.fill(),v.closePath(),v.restore()}function V(){S.clearRect(0,0,e,e),S.drawImage(h.canvas,0,0),S.drawImage(v.canvas,0,0)}function C(){if(p){var t=p*z,e=g*M/Math.cos(t-G),a=W-t;c=e*Math.cos(a)+x[2].x,r=-e*Math.sin(a)-x[2].y}else c=x[1].x,r=x[1].y-g*y}function b(t){var e=S.canvas.getBoundingClientRect();return t[0]=t[0]-e.left-a,t[1]=-t[1]+e.top+a,t}function E(t){var e=t[0],a=t[1];m=Math.acos(e/Math.hypot(e,a)),a<0&&(m=R-m),L=Math.round(m/T),H.HSV[0]=H.HSL[0]=L,I(),P(),V()}function w(t,e){var a=t[0],n=t[1],o=Math.hypot(a,n);if(0!=m){var i=Math.acos(a/o);n<0&&(i=R-i);var s=i-m;a=o*Math.cos(s),n=o*Math.sin(s)}var l=a-x[1].x,c=n-x[2].y,r=-n+x[1].y,h=Math.hypot(l,c),u=Math.hypot(l,r),f=c/h,d=r/Math.hypot(l,r);if(e)return.5<=f&&f<=1&&.5<=d&&d<=1&&0<=l;if(l<0)p=0,g=j(c/y);else{var v=Math.acos(f),S=Math.acos(d);p=z<S&&S%G?u*Math.cos(S-z)/y:v/z,g=z<v&&v%G?h*Math.cos(v-z)/y:h*Math.cos(v-G)/M,p=j(p),g=j(g)}H.HSV[0]=L,H.HSV[1]=p,H.HSV[2]=g,k(),C(),P(),V()}function t(t,l,c,r,h){S.canvas.addEventListener(t,function(t){var e,a,n=b(h(t)),o=(e=n,a=Math.hypot(e[0],e[1]),d<=a&&a<=f?E:w(e,!0)?w:void 0);function i(t){o(b(h(t))),u.call(H,1,o.name)}function s(){removeEventListener(l,i),removeEventListener(c,s),removeEventListener(r,s),u.call(H,2,o.name)}o&&(t.preventDefault(),o(n),u.call(H,0,o.name),addEventListener(l,i),addEventListener(c,s),addEventListener(r,s))})}function I(){H.css="hsl("+H.HSL[0]+", "+Math.round(100*H.HSL[1])+"%, "+Math.round(100*H.HSL[2])+"%)"}function k(){var t=p,e=(2-t)*g;H.HSL[0]=L,H.HSL[1]=t*g/(e<=1?e:2-e)||0,H.HSL[2]=e/2,I()}this.HSV=[0,1,1],this.HSL=[0,1,.5],this.css="hsl(0, 100%, 50%)",this.canvas=S.canvas,this.setSize=function(t){h.canvas.width=h.canvas.height=v.canvas.width=v.canvas.height=S.canvas.width=S.canvas.height=t,o=(n=(f=a=(e=t)/2)/4.5)/4,M=1.5*(d=f-3*n/4),i=f/32,x[0].x=d,x[1].x=x[2].x=-d/2,x[1].y=d*X,x[2].y=-x[1].y,y=2*x[1].y,(s=v.createLinearGradient(x[2].x,x[2].y,d/4,d*Y)).addColorStop(0,"white"),s.addColorStop(1,"rgba(255,255,255,0)"),(l=v.createLinearGradient(x[1].x,x[0].y,x[0].x,x[0].y)).addColorStop(0,"black"),l.addColorStop(1,"transparent"),C(),function(){h.save(),h.translate(a,a),h.beginPath(),h.arc(0,0,f,0,R),h.fillStyle=h.createRadialGradient(0,0,0,0,0,f),h.fillStyle.addColorStop(0,"#000"),h.fillStyle.addColorStop(1,"#555"),h.fill(),h.closePath(),h.beginPath(),h.arc(0,0,f-2*n,0,R),h.fillStyle="#444",h.fill(),h.closePath();for(var t=0;t<360;t++)h.rotate(-T),h.fillStyle="hsl("+t+", 100%, 50%)",h.fillRect(d-n/4,0,n,o);h.beginPath(),h.arc(0,0,d,0,R),h.fillStyle="rgba(68,68,68,0.25)",h.fill(),h.closePath(),h.restore()}(),P(),V()},this.setHSV=function(t,e,a){L=this.HSV[0]=Math.round(q(t)),p=this.HSV[1]=j(e),g=this.HSV[2]=j(a),m=L*T,k(),C(),P(),V(),u.call(this,3,"setHSV")},this.setHSL=function(t,e,a){var n,o;this.HSL[0]=Math.round(q(t)),this.HSL[1]=j(e),this.HSL[2]=j(a),m=this.HSL[0]*T,I(),n=H.HSL[1],o=H.HSL[2],n*=o<.5?o:1-o,L=H.HSV[0]=H.HSL[0],g=H.HSV[2]=o+n,p=H.HSV[1]=2*n/g,C(),P(),V(),u.call(this,3,"setHSL")},t("touchstart","touchmove","touchend","touchcancel",function(t){return[t.changedTouches[0].clientX,t.changedTouches[0].clientY]}),t("mousedown","mousemove","mouseup","mouseleave",function(t){return[t.clientX,t.clientY]}),this.setSize(e)}return e.version="1.0.4",e});