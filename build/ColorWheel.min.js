!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ColorWheel=e()}(this,function(){"use strict";var R=2*Math.PI,T=Math.PI/180,G=Math.PI/6,z=Math.PI/3,W=Math.PI/2,t=Math.sqrt(3),X=t/2,Y=t/4;function j(t){return Math.max(0,Math.min(t,1))}function q(t){return(t-=360*(t/360|0))<0&&(t+=360),t}function e(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:256,a=document.createElement("canvas").getContext("2d"),n=document.createElement("canvas").getContext("2d"),o=document.createElement("canvas").getContext("2d"),y=this,i=void 0,v=void 0,l=void 0,s=void 0,u=void 0,c=void 0,M=void 0,m=void 0,r=void 0,h=void 0,H=0,f=void 0,S=void 0,L=0,p=1,g=1,x=[0,0,0].map(function(){return{x:0,y:0}});function P(){n.save(),n.clearRect(0,0,e,e),n.translate(i,i),n.rotate(-H),n.beginPath(),n.moveTo(x[0].x,x[0].y),n.lineTo(x[1].x,x[1].y),n.lineTo(x[2].x,x[2].y),n.closePath(),n.fillStyle="hsl("+L+", 100%, 50%)",n.fill(),n.fillStyle=h,n.fill(),n.save(),n.globalCompositeOperation="lighter",n.fillStyle=r,n.fill(),n.restore(),n.strokeStyle="whitesmoke",n.lineWidth=c,n.stroke(),n.beginPath(),n.arc(f,S,5,0,R),n.fillStyle=y.css,n.stroke(),n.fill(),n.closePath(),n.restore()}function C(){o.clearRect(0,0,e,e),o.drawImage(a.canvas,0,0),o.drawImage(n.canvas,0,0)}function b(){if(p){var t=p*z,e=g*m/Math.cos(t-G),a=W-t;f=e*Math.cos(a)+x[2].x,S=-e*Math.sin(a)-x[2].y}else f=x[1].x,S=x[1].y-g*M}function E(t){var e=o.canvas.getBoundingClientRect();return t[0]=t[0]-e.left-i,t[1]=-t[1]+e.top+i,t}function V(t){var e=t[0],a=t[1];H=Math.acos(e/Math.hypot(e,a)),a<0&&(H=R-H),L=Math.round(H/T),y.HSV[0]=y.HSL[0]=L,I(),P(),C()}function w(t,e){var a=t[0],n=t[1],o=Math.hypot(a,n);if(0!=H){var i=Math.acos(a/o);n<0&&(i=R-i);var l=i-H;a=o*Math.cos(l),n=o*Math.sin(l)}var s=a-x[1].x,c=n-x[2].y,r=-n+x[1].y,h=Math.hypot(s,c),d=Math.hypot(s,r),v=c/h,u=r/Math.hypot(s,r);if(e)return.5<=v&&v<=1&&.5<=u&&u<=1&&0<=s;if(s<0)p=0,g=j(c/M);else{var f=Math.acos(v),S=Math.acos(u);p=z<S&&S%G?d*Math.cos(S-z)/M:f/z,g=z<f&&f%G?h*Math.cos(f-z)/M:h*Math.cos(f-G)/m,p=j(p),g=j(g)}y.HSV[0]=L,y.HSV[1]=p,y.HSV[2]=g,k(),b(),P(),C()}function t(t,s,c,r,h){o.canvas.addEventListener(t,function(t){var e,a,n=E(h(t)),o=(e=n,a=Math.hypot(e[0],e[1]),u<=a&&a<=v?V:w(e,!0)?w:void 0);function i(t){o(E(h(t))),d.call(y,1,o.name)}function l(){removeEventListener(s,i),removeEventListener(c,l),removeEventListener(r,l),d.call(y,2,o.name)}o&&(t.preventDefault(),o(n),d.call(y,0,o.name),addEventListener(s,i),addEventListener(c,l),addEventListener(r,l))})}function I(){y.css="hsl("+y.HSL[0]+", "+Math.round(100*y.HSL[1])+"%, "+Math.round(100*y.HSL[2])+"%)"}function k(){var t=p,e=(2-t)*g;y.HSL[0]=L,y.HSL[1]=t*g/(e<=1?e:2-e)||0,y.HSL[2]=e/2,I()}this.HSV=[0,1,1],this.HSL=[0,1,.5],this.css="hsl(0, 100%, 50%)",this.canvas=o.canvas,this.setSize=function(t){a.canvas.width=a.canvas.height=n.canvas.width=n.canvas.height=o.canvas.width=o.canvas.height=t,s=(l=(v=i=(e=t)/2)/4.5)/4,m=1.5*(u=v-3*l/4),c=v/32,x[0].x=u,x[1].x=x[2].x=-u/2,x[1].y=u*X,x[2].y=-x[1].y,M=2*x[1].y,(r=n.createLinearGradient(x[2].x,x[2].y,u/4,u*Y)).addColorStop(0,"white"),r.addColorStop(1,"rgba(255,255,255,0)"),(h=n.createLinearGradient(x[1].x,x[0].y,x[0].x,x[0].y)).addColorStop(0,"black"),h.addColorStop(1,"transparent"),b(),function(){a.save(),a.translate(i,i),a.beginPath(),a.arc(0,0,v,0,R),a.fillStyle=a.createRadialGradient(0,0,0,0,0,v),a.fillStyle.addColorStop(0,"#000"),a.fillStyle.addColorStop(1,"#555"),a.fill(),a.closePath(),a.beginPath(),a.arc(0,0,v-2*l,0,R),a.fillStyle="#444",a.fill(),a.closePath();for(var t=0;t<360;t++)a.rotate(-T),a.fillStyle="hsl("+t+", 100%, 50%)",a.fillRect(u-l/4,0,l,s);a.beginPath(),a.arc(0,0,u,0,R),a.fillStyle="rgba(68,68,68,0.25)",a.fill(),a.closePath(),a.restore()}(),P(),C()},this.setHSV=function(t,e,a){L=Math.round(q(t)),p=j(e),g=j(a),H=L*T,k(),b(),P(),C(),d.call(this,3,"setHSV")},this.setHSL=function(t,e,a){var n,o;this.HSL[0]=Math.round(q(t)),this.HSL[1]=j(e),this.HSL[2]=j(a),H=this.HSL[0]*T,I(),n=y.HSL[1],o=y.HSL[2],n*=o<.5?o:1-o,L=y.HSV[0]=y.HSL[0],g=y.HSV[2]=o+n,p=y.HSV[1]=2*n/g,b(),P(),C(),d.call(this,3,"setHSL")},t("touchstart","touchmove","touchend","touchcancel",function(t){return[t.changedTouches[0].clientX,t.changedTouches[0].clientY]}),t("mousedown","mousemove","mouseup","mouseleave",function(t){return[t.clientX,t.clientY]}),this.setSize(e)}return e.version="1.0.2",e});